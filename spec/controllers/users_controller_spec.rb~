require 'spec_helper'

describe DocumentsController do
  describe 'upload a profile picture' do

    before :each do
      # stub the filter methods called before each documents_controller method
      @fake_user = mock 'User'
      @fake_document = mock('Document', :project= => nil, :updater= => nil)
      User.should_receive(:find_by_id).and_return @fake_user
      controller.should_receive(:set_can_edit)
    end

    it 'should save a profile picture successfully' do
      @fake_user.should_receive(:attributes)
      @fake_user.should_receive(:save).and_return(true)

      post :create, {:uid => 1}
      response.should redirect_to profile_path
      flash[:notice].should == "Profile picture updated successfully"
    end

    it 'should fail at saving a profile picture' do

    end
  end

  describe 'delete a profile picture' do
  end

end
